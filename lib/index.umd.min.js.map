{"version":3,"file":"index.umd.min.js","sources":["../node_modules/string-convert/camel2hyphen.js","../node_modules/json2mq/index.js","../src/responsive.js","../src/util.js","../src/main.js","../src/provider.js"],"sourcesContent":["var camel2hyphen = function (str) {\n  return str\n          .replace(/[A-Z]/g, function (match) {\n            return '-' + match.toLowerCase();\n          })\n          .toLowerCase();\n};\n\nmodule.exports = camel2hyphen;","var camel2hyphen = require('string-convert/camel2hyphen');\n\nvar isDimension = function (feature) {\n  var re = /[height|width]$/;\n  return re.test(feature);\n};\n\nvar obj2mq = function (obj) {\n  var mq = '';\n  var features = Object.keys(obj);\n  features.forEach(function (feature, index) {\n    var value = obj[feature];\n    feature = camel2hyphen(feature);\n    // Add px to dimension features\n    if (isDimension(feature) && typeof value === 'number') {\n      value = value + 'px';\n    }\n    if (value === true) {\n      mq += feature;\n    } else if (value === false) {\n      mq += 'not ' + feature;\n    } else {\n      mq += '(' + feature + ': ' + value + ')';\n    }\n    if (index < features.length-1) {\n      mq += ' and '\n    }\n  });\n  return mq;\n};\n\nvar json2mq = function (query) {\n  var mq = '';\n  if (typeof query === 'string') {\n    return query;\n  }\n  // Handling array of media queries\n  if (query instanceof Array) {\n    query.forEach(function (q, index) {\n      mq += obj2mq(q);\n      if (index < query.length-1) {\n        mq += ', '\n      }\n    });\n    return mq;\n  }\n  // Handling single media query\n  return obj2mq(query);\n};\n\nmodule.exports = json2mq;","export default {\n  xs: {maxWidth: '480px'},\n  sm: {maxWidth: '768px'},\n  md: {maxWidth: '992px'},\n  lg: {maxWidth: '1200px'},\n  xl: {maxWidth: '1600px'}\n}\n","export const isType = type => value =>\n  Object.prototype.toString.call(value).toLowerCase() === `[object ${type}]`\n\nexport const isObject = isType('object')\n","import json2mq from 'json2mq'\nimport responsive from './responsive'\nimport {isObject} from './util'\n\nconst DEFAULT_NAME = '__default__'\n\nconst MediaQuery = {\n  name: 'media-query',\n\n  props: {\n    value: {\n      type: [Object, Boolean],\n      default: () => ({})\n    },\n    query: {\n      type: Object,\n      default: () => responsive\n    }\n  },\n\n  data() {\n    const keys = Object.keys(this.query)\n    const matches = {}\n    const mediaQueries = {}\n    const defaultMatches = isObject(this.value) ?\n      this.value :\n      {[DEFAULT_NAME]: this.value}\n\n    if (keys.every(key => isObject(this.query[key]))) {\n      keys.forEach(key => {\n        matches[key] = false\n        mediaQueries[key] = json2mq(this.query[key])\n      })\n    } else {\n      matches[DEFAULT_NAME] = false\n      mediaQueries[DEFAULT_NAME] = json2mq(this.query)\n    }\n\n    return {\n      matches: {...matches, ...defaultMatches},\n      mediaQueries,\n      medias: {}\n    }\n  },\n\n  mounted() {\n    if (typeof window === 'undefined') {\n      return false\n    }\n\n    this.addMediaQueryListeners()\n  },\n\n  beforeDestroy() {\n    this.removeMediaQueryListeners()\n  },\n\n  render() {\n    if (this.$slots.default && this.$slots.default.length > 0) {\n      return this.$slots.default[0]\n    }\n  },\n\n  methods: {\n    addMediaQueryListeners() {\n      Object.keys(this.mediaQueries).forEach(key => {\n        const mediaQuery = this.mediaQueries[key]\n\n        this.medias[key] = window.matchMedia(mediaQuery)\n\n        this.updateMatches(key, this.medias[key].matches)\n\n        this.medias[key].onchange = media =>\n          this.updateMatches(key, media.matches)\n      })\n    },\n\n    removeMediaQueryListeners() {\n      Object.keys(this.mediaQueries).forEach(key => {\n        this.medias[key].onchange = null\n      })\n    },\n\n    updateMatches(key, matches) {\n      if (this.matches[key] === matches) {\n        return\n      }\n\n      this.matches[key] = matches\n\n      this.$emit('input', this.matches)\n      this.$emit('on-change', this.matches)\n    }\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.component(MediaQuery.name, MediaQuery)\n}\n\nexport default MediaQuery\n","import json2mq from 'json2mq'\nimport responsive from './responsive'\nimport {isObject} from './util'\n\nconst DEFAULT_NAME = '__default__'\n\nconst MediaQueryProvider = {\n  name: 'media-query-provider',\n\n  props: {\n    query: {\n      type: Object,\n      default: () => responsive\n    }\n  },\n\n  data() {\n    const keys = Object.keys(this.query)\n    const matches = {}\n    const mediaQueries = {}\n    const defaultMatches = {}\n\n    if (keys.every(key => isObject(this.query[key]))) {\n      keys.forEach(key => {\n        matches[key] = false\n        mediaQueries[key] = json2mq(this.query[key])\n      })\n    } else {\n      matches[DEFAULT_NAME] = false\n      mediaQueries[DEFAULT_NAME] = json2mq(this.query)\n      defaultMatches[DEFAULT_NAME] = {}\n    }\n\n    return {\n      matches: {...matches, ...defaultMatches},\n      mediaQueries,\n      medias: {}\n    }\n  },\n\n  provide() {\n    return {\n      media: this.matches\n    }\n  },\n\n  mounted() {\n    if (typeof window === 'undefined') {\n      return false\n    }\n\n    this.addMediaQueryListeners()\n  },\n\n  beforeDestroy() {\n    this.removeMediaQueryListeners()\n  },\n\n  render() {\n    if (this.$slots.default && this.$slots.default.length > 0) {\n      return this.$slots.default[0]\n    }\n  },\n\n  methods: {\n    addMediaQueryListeners() {\n      Object.keys(this.mediaQueries).forEach(key => {\n        const mediaQuery = this.mediaQueries[key]\n\n        this.medias[key] = window.matchMedia(mediaQuery)\n\n        this.updateMatches(key, this.medias[key].matches)\n\n        this.medias[key].onchange = media =>\n          this.updateMatches(key, media.matches)\n      })\n    },\n\n    removeMediaQueryListeners() {\n      Object.keys(this.mediaQueries).forEach(key => {\n        this.medias[key].onchange = null\n      })\n    },\n\n    updateMatches(key, matches) {\n      if (this.matches[key] === matches) {\n        return\n      }\n\n      this.matches[key] = matches\n    }\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.component(MediaQueryProvider.name, MediaQueryProvider)\n}\n\nexport default MediaQueryProvider\n"],"names":["str","replace","match","toLowerCase","obj2mq","obj","mq","features","Object","keys","forEach","feature","index","value","test","isDimension","camel2hyphen","length","query","Array","q","maxWidth","isObject","prototype","toString","call","type","MediaQuery","Boolean","responsive","this","matches","mediaQueries","defaultMatches","every","_this","key","json2mq","window","addMediaQueryListeners","removeMediaQueryListeners","$slots","default","mediaQuery","_this2","medias","matchMedia","updateMatches","onchange","media","$emit","Vue","component","name","MediaQueryProvider"],"mappings":"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"}